{"ast":null,"code":"import _regeneratorRuntime from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/shashankvyas/projects/maker/src/components/Home.js\";\nimport React from \"react\";\nimport moment from \"moment\";\nimport TimePicker from 'rc-time-picker';\nimport welcomeImage from \"../images/welcome.svg\";\nimport spinner from \"../images/spinner.svg\";\nimport { GOOGLE_API_KEY, CALENDAR_ID, CLIENT_ID, SCOPES } from \"../config.js\";\nvar DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"];\nvar ROUNDING = 30 * 60 * 1000;\nvar format = 'h:mm a';\n\nvar Home =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Home, _React$Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n\n    _this.setPage =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(page) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (page === \"add\") {\n                  _this.setState({\n                    startTime: moment(),\n                    endTime: moment(Math.ceil(+moment().add(15, 'minutes') / ROUNDING) * ROUNDING)\n                  });\n                }\n\n                _context.next = 3;\n                return _this.setState({\n                  curApp: page\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.setStart =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(val) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _this.setState({\n                  startTime: val\n                });\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.setEnd =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(val) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return _this.setState({\n                  endTime: val\n                });\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.tick = function () {\n      var time = moment().format(\"dddd, Do MMMM, h:mm A\");\n\n      _this.setState({\n        time: time\n      });\n    };\n\n    _this.setStatus = function () {\n      var now = moment();\n      var events = _this.state.events;\n\n      for (var e = 0; e < events.length; e++) {\n        var eventItem = events[e];\n\n        if (moment(now).isBetween(moment(eventItem.start.dateTime), moment(eventItem.end.dateTime))) {\n          _this.setState({\n            isBusy: true\n          });\n\n          return false;\n        } else {\n          _this.setState({\n            isBusy: false\n          });\n        }\n      }\n    };\n\n    _this.state = {\n      time: moment().format(\"dddd, Do MMMM, YYYY h:mm A\"),\n      events: [],\n      isBusy: false,\n      isEmpty: false,\n      showAuthButton: true,\n      showSignOutButton: false,\n      isLoading: true,\n      curApp: \"home\"\n    }; // this.signinChanged  = this.signinChanged.bind(this);\n\n    _this.initClient = _this.initClient.bind(_assertThisInitialized(_assertThisInitialized(_this))); //  this.handleClick = this.handleClick.bind(this);\n\n    _this.addEvent = _this.addEvent.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setPage = _this.setPage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setStart = _this.setStart.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setEnd = _this.setEnd.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"handleClientLoad\",\n    value: function handleClientLoad() {\n      var script = document.createElement(\"script\");\n      script.src = \"https://apis.google.com/js/client.js\";\n      window.gapi.load('client:auth2', this.initClient);\n    }\n  }, {\n    key: \"initClient\",\n    value: function initClient() {\n      window.gapi.client.init({\n        discoveryDocs: DISCOVERY_DOCS,\n        clientId: CLIENT_ID,\n        scope: SCOPES\n      }).then(function () {\n        console.log(window.gapi);\n      }); //window.gapi.auth2.getAuthInstance().isSignedIn.listen(this.signinChanged);\n      //this.signinChanged(window.gapi.auth2.getAuthInstance().isSignedIn.get());\n    }\n  }, {\n    key: \"addEvent\",\n    value: function addEvent() {\n      var event = {\n        'summary': 'Quick Meeting',\n        'description': 'Quick Meeting booked by SAM',\n        'start': {\n          'dateTime': moment(this.state.startTime).toISOString(),\n          'timeZone': 'America/Los_Angeles'\n        },\n        'end': {\n          'dateTime': moment(this.state.endTime).toISOString(),\n          'timeZone': 'America/Los_Angeles'\n        },\n        'reminders': {\n          'useDefault': false\n        }\n      };\n      var request = window.gapi.client.calendar.events.insert({\n        'calendarId': CALENDAR_ID,\n        'resource': event\n      });\n      request.execute(function (event) {\n        console.log('Event created: ' + event.htmlLink);\n        console.log(event);\n      });\n      this.setState({\n        curApp: \"home\"\n      });\n      this.getEvents();\n    }\n  }, {\n    key: \"getEvents\",\n    value: function getEvents() {\n      var that = this;\n\n      function start() {\n        window.gapi.client.init({\n          apiKey: GOOGLE_API_KEY\n        }).then(function () {\n          return window.gapi.client.request({\n            path: \"https://www.googleapis.com/calendar/v3/calendars/\".concat(CALENDAR_ID, \"/events?maxResults=11&orderBy=startTime&singleEvents=true&timeMin=\").concat(moment().toISOString(), \"&timeMax=\").concat(moment().endOf(\"day\").toISOString())\n          });\n        }).then(function (response) {\n          var events = response.result.items;\n          var sortedEvents = events.sort(function (a, b) {\n            return moment(b.start.dateTime).format(\"YYYYMMDD\") - moment(a.start.dateTime).format(\"YYYYMMDD\");\n          });\n\n          if (events.length > 0) {\n            that.setState({\n              events: sortedEvents,\n              isLoading: false,\n              isEmpty: false\n            }, function () {\n              that.setStatus();\n            });\n          } else {\n            that.setState({\n              events: [],\n              isBusy: false,\n              isEmpty: true,\n              isLoading: false\n            });\n          }\n        }, function (reason) {\n          console.log(reason);\n        });\n      }\n\n      window.gapi.load(\"client\", start);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          time = _this$state.time,\n          events = _this$state.events;\n      var eventsList = events.map(function (event) {\n        return React.createElement(\"div\", {\n          className: \"eventContainer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          className: \"list-group-item\",\n          href: event.htmlLink,\n          target: \"_blank\",\n          key: event.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        }, event.summary, \" \", React.createElement(\"span\", {\n          className: \"badge\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211\n          },\n          __self: this\n        }, moment(event.start.dateTime).format(\"h:mm a\"), \",\", \" \", moment(event.end.dateTime).diff(moment(event.start.dateTime), \"minutes\"), \" \", \"minutes, \", moment(event.start.dateTime).format(\"MMMM Do\"), \" \")));\n      });\n      var addState = React.createElement(\"div\", {\n        className: \"appletContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"https://images-na.ssl-images-amazon.com/images/I/4136KhxLISL._SY355_.jpg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, \"Book now for \", moment(this.state.endTime).diff(this.state.startTime, 'minutes') + 1, \" minutes\"), React.createElement(\"div\", {\n        className: \"startTimeContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(TimePicker, {\n        id: \"startTime\",\n        showSecond: false,\n        value: this.state.startTime,\n        onChange: this.setStart,\n        format: format,\n        use12Hours: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"endTimeContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(TimePicker, {\n        id: \"endTime\",\n        showSecond: false,\n        value: this.state.endTime,\n        onChange: this.setEnd,\n        format: format,\n        use12Hours: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"primary-add\",\n        href: \"javascript:void(0);\",\n        onClick: this.addEvent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, \"Submit\")));\n      var emptyState = React.createElement(\"div\", {\n        className: \"appletContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: welcomeImage,\n        alt: \"Welcome\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, \"No meetings are scheduled for the day. Create one by clicking the plus button.\"));\n      var loadingState = React.createElement(\"div\", {\n        className: \"loading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: spinner,\n        alt: \"Loading...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }));\n      return React.createElement(\"div\", {\n        className: \"appContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: this.state.isBusy ? \"current-status busy\" : \"current-status open\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        id: \"currentStatus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, this.state.isBusy ? \"BUSY\" : \"OPEN\"), React.createElement(\"div\", {\n        className: \"current-time\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, time))), React.createElement(\"div\", {\n        className: \"upcoming-meetings\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, events.length > 0 && React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, \"Upcoming Meetings\"), React.createElement(\"div\", {\n        className: \"list-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, this.state.isEmpty && emptyState, events.length > 0 && eventsList), this.state.isBusy === false ? React.createElement(\"a\", {\n        className: \"primary-cta\",\n        href: \"javascript:void(0);\",\n        onClick: function onClick() {\n          return _this2.setPage(\"add\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, \"+\") : null));\n    }\n  }]);\n\n  return Home;\n}(React.Component);\n\nexport default Home;","map":{"version":3,"sources":["/Users/shashankvyas/projects/maker/src/components/Home.js"],"names":["React","moment","TimePicker","GOOGLE_API_KEY","CALENDAR_ID","CLIENT_ID","SCOPES","DISCOVERY_DOCS","ROUNDING","format","Home","props","setPage","page","setState","startTime","endTime","Math","ceil","add","curApp","setStart","val","setEnd","tick","time","setStatus","now","events","state","e","length","eventItem","isBetween","start","dateTime","end","isBusy","isEmpty","showAuthButton","showSignOutButton","isLoading","initClient","bind","addEvent","script","document","createElement","src","window","gapi","load","client","init","discoveryDocs","clientId","scope","then","console","log","event","toISOString","request","calendar","insert","execute","htmlLink","getEvents","that","apiKey","path","endOf","response","result","items","sortedEvents","sort","a","b","reason","eventsList","map","id","summary","diff","addState","emptyState","welcomeImage","loadingState","spinner","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport moment from \"moment\";\nimport TimePicker from 'rc-time-picker';\nimport welcomeImage from \"../images/welcome.svg\";\nimport spinner from \"../images/spinner.svg\";\nimport { GOOGLE_API_KEY, CALENDAR_ID, CLIENT_ID, SCOPES } from \"../config.js\";\n\nvar DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"];\nconst ROUNDING = 30 * 60 * 1000;\nconst format = 'h:mm a';\n\n\nclass Home extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n  \t\ttime: moment().format(\"dddd, Do MMMM, YYYY h:mm A\"),\n      events: [],\n      isBusy: false,\n      isEmpty: false,\n      showAuthButton: true,\n      showSignOutButton: false,\n      isLoading: true,\n      curApp: \"home\"\n    };\n   // this.signinChanged  = this.signinChanged.bind(this);\n    this.initClient = this.initClient.bind(this);\n  //  this.handleClick = this.handleClick.bind(this);\n    this.addEvent = this.addEvent.bind(this);\n    this.setPage = this.setPage.bind(this);\n    this.setStart = this.setStart.bind(this)\n    this.setEnd = this.setEnd.bind(this)\n  }\n\n  handleClientLoad() {\n  \tconst script = document.createElement(\"script\");\n    script.src = \"https://apis.google.com/js/client.js\";\n    window.gapi.load('client:auth2', this.initClient);\n  }\n\n  initClient() {\n    window.gapi.client.init({\ndiscoveryDocs: DISCOVERY_DOCS,\nclientId: CLIENT_ID,\nscope: SCOPES\n}).then(function () {\n  console.log(window.gapi);\n  });\n//window.gapi.auth2.getAuthInstance().isSignedIn.listen(this.signinChanged);\n//this.signinChanged(window.gapi.auth2.getAuthInstance().isSignedIn.get());\n}\n\nsetPage = async page => {\n\tif (page === \"add\"){\n\t\tthis.setState({\nstartTime: moment(),\nendTime:   moment(Math.ceil((+moment().add(15, 'minutes')) / ROUNDING) * ROUNDING)\n})\n}\n\nawait this.setState({\ncurApp:page\n});\n}\n\nsetStart = async val => {\n\tawait this.setState({\nstartTime:val\n});\n}\n\nsetEnd = async val => {\n\tawait this.setState({\nendTime:val\n});\n}\n\ntick = () => {\n\tlet time = moment().format(\"dddd, Do MMMM, h:mm A\");\n\tthis.setState({\ntime: time\n});\n};\n\n\naddEvent() {\n\tvar event = {\n\t\t'summary': 'Quick Meeting',\n\t\t'description': 'Quick Meeting booked by SAM',\n\t\t'start': {\n\t\t\t'dateTime': moment(this.state.startTime).toISOString(),\n\t\t\t'timeZone': 'America/Los_Angeles'\n\t\t},\n\t\t'end': {\n\t\t\t'dateTime': moment(this.state.endTime).toISOString(),\n\t\t\t'timeZone': 'America/Los_Angeles'\n\t\t},\n\t\t'reminders': {\n\t\t\t'useDefault': false,\n\t\t}\n\t};\n\n\tvar request = window.gapi.client.calendar.events.insert({\n\t\t\t'calendarId': CALENDAR_ID,\n\t\t\t'resource': event\n\t\t\t});\n\n\trequest.execute(function(event) {\n\t\t\tconsole.log('Event created: ' + event.htmlLink);\n\t\t\tconsole.log(event);\n\n\t\t\t});\n\n\tthis.setState({\ncurApp: \"home\"\n})\n\nthis.getEvents();\n\n}\n\ngetEvents() {\n\tlet that = this;\n\tfunction start() {\n\t\twindow.gapi.client\n\t\t\t.init({\napiKey: GOOGLE_API_KEY\n})\n.then(function() {\n\t\treturn window.gapi.client.request({\npath: `https://www.googleapis.com/calendar/v3/calendars/${CALENDAR_ID}/events?maxResults=11&orderBy=startTime&singleEvents=true&timeMin=${moment().toISOString()}&timeMax=${moment()\n.endOf(\"day\")\n.toISOString()}`\n});\n\t\t})\n.then(\n\t\tresponse => {\n\t\tlet events = response.result.items;\n\t\tlet sortedEvents = events.sort(function(a, b) {\n\t\t\t\treturn (\n\t\t\t\t\t\tmoment(b.start.dateTime).format(\"YYYYMMDD\") -\n\t\t\t\t\t\tmoment(a.start.dateTime).format(\"YYYYMMDD\")\n\t\t\t\t       );\n\t\t\t\t});\n\t\tif (events.length > 0) {\n\t\tthat.setState(\n\t\t\t\t{\nevents: sortedEvents,\nisLoading: false,\nisEmpty: false\n},\n() => {\nthat.setStatus();\n}\n);\n\t\t} else {\n\t\t\tthat.setState({\nevents: [],\nisBusy: false,\nisEmpty: true,\nisLoading: false\n});\n}\n},\n\tfunction(reason) {\n\t\tconsole.log(reason);\n\t}\n);\n}\nwindow.gapi.load(\"client\", start);\n}\n\nsetStatus = () => {\n\tlet now = moment();\n\tlet events = this.state.events;\n\tfor (var e = 0; e < events.length; e++) {\n\t\tvar eventItem = events[e];\n\t\tif (\n\t\t\t\tmoment(now).isBetween(\n\t\t\t\t\tmoment(eventItem.start.dateTime),\n\t\t\t\t\tmoment(eventItem.end.dateTime)\n\t\t\t\t\t)\n\t\t   ) {\n\t\t\tthis.setState({\nisBusy: true,\n});\nreturn false;\n} else {\n\tthis.setState({\nisBusy: false\n});\n}\n}\n};\n\nrender(){\n\n  const { time, events } = this.state;\n\n  let eventsList = events.map(function(event) {\n      return (\n          <div className=\"eventContainer\">\n          <a\n          className=\"list-group-item\"\n          href={event.htmlLink}\n          target=\"_blank\"\n          key={event.id}\n          >\n          {event.summary}{\" \"}\n          <span className=\"badge\">\n          {moment(event.start.dateTime).format(\"h:mm a\")},{\" \"}\n          {moment(event.end.dateTime).diff(\n              moment(event.start.dateTime),\n              \"minutes\"\n              )}{\" \"}\n          minutes, {moment(event.start.dateTime).format(\"MMMM Do\")}{\" \"}\n\n          </span>\n          </a>\n          </div>\n\n          );\n  });\n\n  let addState = (\n      <div className=\"appletContainer\">\n\n      <img src=\"https://images-na.ssl-images-amazon.com/images/I/4136KhxLISL._SY355_.jpg\"></img>\n\n      <h3>\n      Book now for {moment(this.state.endTime).diff(this.state.startTime, 'minutes') + 1} minutes\n      </h3>\n\n      <div className=\"startTimeContainer\">\n      <TimePicker\n      id=\"startTime\"\n      showSecond={false}\n      value={this.state.startTime}\n      onChange={this.setStart}\n      format={format}\n      use12Hours\n      />\n      </div>\n\n      <div className=\"endTimeContainer\">\n      <TimePicker\n      id=\"endTime\"\n      showSecond={false}\n      value={this.state.endTime}\n      onChange={this.setEnd}\n      format={format}\n      use12Hours\n        />\n        </div>\n\n        <div>\n\n        <a\n        className=\"primary-add\"\n        href=\"javascript:void(0);\"\n        onClick={this.addEvent}>\n        Submit\n        </a>\n\n        </div>\n        </div>\n\n        );\n\n      let emptyState = (\n          <div className=\"appletContainer\">\n          <img src={welcomeImage} alt=\"Welcome\" />\n          <h3>\n          No meetings are scheduled for the day. Create one by clicking the plus\n          button.\n          </h3>\n          </div>\n          );\n\n          let loadingState = (\n    \t\t\t\t\t<div className=\"loading\">\n    \t\t\t\t\t<img src={spinner} alt=\"Loading...\" />\n    \t\t\t\t\t</div>\n    \t\t\t\t\t);\n\n        return(\n           <div className=\"appContainer\">\n\t\t\t \t\t<div\n\t\t\t \t\tclassName={\n\t\t\t \t\tthis.state.isBusy ? \"current-status busy\" : \"current-status open\"\n\t\t\t \t\t}\n\t\t\t \t\t>\n\t\t\t \t\t<div>\n\t\t\t \t\t<h1 id=\"currentStatus\">{this.state.isBusy ? \"BUSY\" : \"OPEN\"}</h1>\n\t\t\t \t\t<div className=\"current-time\">{time}</div>\n\t\t\t \t\t</div>\n\t\t\t \t\t</div>\n\n\t\t\t \t\t<div className=\"upcoming-meetings\">\n\n\t\t\t \t\t{events.length > 0 && <h1>Upcoming Meetings</h1>}\n\t\t\t <div className=\"list-group\">\n\n\t\t\t {this.state.isEmpty  && emptyState}\n\t\t\t {events.length > 0   && eventsList}\n\t\t\t </div>\n\n\t\t\t {this.state.isBusy === false ? <a className=\"primary-cta\" href=\"javascript:void(0);\"\n\t\t\t \tonClick={()=>this.setPage(\"add\")}>+</a> : null}\n\n\t\t\t </div>\n\t\t\t \t</div>\n\n\n        );\n\n}\n\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}