{"ast":null,"code":"import _regeneratorRuntime from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/shashankvyas/projects/maker/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/shashankvyas/projects/maker/src/components/Book.js\";\nimport React from \"react\";\nimport axios from 'axios';\nimport moment from \"moment\";\nimport TimePicker from 'rc-time-picker';\nimport Clock from 'react-clock';\nimport { GOOGLE_API_KEY, CALENDAR_ID } from \"../config.js\";\nvar ROUNDING = 30 * 60 * 1000;\nvar format = 'h:mm a';\n\nvar Book =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Book, _React$Component);\n\n  function Book(props) {\n    var _this;\n\n    _classCallCheck(this, Book);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Book).call(this, props));\n\n    _this.setStart =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(val) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.setState({\n                  startTime: val\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.setEnd =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(val) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _this.setState({\n                  endTime: val\n                });\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.state = {\n      startTime: moment(),\n      endTime: moment(Math.ceil(+moment().add(15, 'minutes') / ROUNDING) * ROUNDING),\n      loggedIn: true,\n      jwtToken: null\n    };\n    _this.addEvent = _this.addEvent.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setStart = _this.setStart.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.setEnd = _this.setEnd.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Book, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setUserState();\n    }\n  }, {\n    key: \"setUserState\",\n    value: function setUserState() {\n      var userJson = JSON.parse(sessionStorage.getItem('googleUser'));\n\n      if (userJson !== null) {\n        this.setState(function (state, props) {\n          return {\n            loggedIn: true,\n            jwtToken: userJson.tokenObj.token_type + \" \" + userJson.tokenObj.access_token\n          };\n        });\n      } else {\n        this.setState(function (state, props) {\n          return {\n            loggedIn: false,\n            jwtToken: null\n          };\n        });\n      }\n    }\n  }, {\n    key: \"addEvent\",\n    value: function addEvent() {\n      var token = GOOGLE_API_KEY;\n      var key = this.state.jwtToken;\n      var postData = {\n        'summary': 'Quick Meeting',\n        'description': 'Quick Meeting booked by SAM',\n        'start': {\n          'dateTime': moment(this.state.startTime).toISOString()\n        },\n        'end': {\n          'dateTime': moment(this.state.endTime).toISOString()\n        },\n        'reminders': {\n          'useDefault': false\n        }\n      };\n      var headers = {\n        'Content-Type': 'application/json',\n        'Authorization': key\n      };\n      axios.post(\"https://content.googleapis.com/calendar/v3/calendars/\".concat(CALENDAR_ID, \"/events?alt=json&key=\").concat(token), postData, {\n        headers: headers\n      }).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var addState = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          display: 'inline-block'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(Clock, {\n        value: moment(this.state.startTime).toDate(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      })), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Book now for \", moment(this.state.endTime).diff(this.state.startTime, 'minutes') + 1, \" minutes\"), React.createElement(\"div\", {\n        className: \"startTimeContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(TimePicker, {\n        id: \"startTime\",\n        showSecond: false,\n        value: this.state.startTime,\n        onChange: this.setStart,\n        format: format,\n        use12Hours: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }), React.createElement(TimePicker, {\n        id: \"endTime\",\n        showSecond: false,\n        value: this.state.endTime,\n        onChange: this.setEnd,\n        format: format,\n        use12Hours: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"primary-add\",\n        buttonText: \"Submit\",\n        onClick: this.addEvent.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Submit\"), React.createElement(\"button\", {\n        className: \"primary-add\",\n        buttonText: \"Cancel\",\n        onClick: function onClick() {\n          return document.getElementById(\"wk-message\").style.display = \"block\";\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }));\n      return React.createElement(\"div\", {\n        className: \"appletContainer\",\n        id: \"booker\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, this.state.loggedIn && addState);\n    }\n  }]);\n\n  return Book;\n}(React.Component);\n\nexport default Book;","map":{"version":3,"sources":["/Users/shashankvyas/projects/maker/src/components/Book.js"],"names":["React","axios","moment","TimePicker","Clock","GOOGLE_API_KEY","CALENDAR_ID","ROUNDING","format","Book","props","setStart","val","setState","startTime","setEnd","endTime","state","Math","ceil","add","loggedIn","jwtToken","addEvent","bind","setUserState","userJson","JSON","parse","sessionStorage","getItem","tokenObj","token_type","access_token","token","key","postData","toISOString","headers","post","then","response","console","log","catch","error","addState","display","toDate","diff","document","getElementById","style","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from 'axios';\nimport moment from \"moment\";\nimport TimePicker from 'rc-time-picker';\nimport Clock from 'react-clock'\nimport { GOOGLE_API_KEY, CALENDAR_ID } from \"../config.js\";\n\nconst ROUNDING = 30 * 60 * 1000;\nconst format = 'h:mm a';\n\nclass Book extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n  \t\tstartTime: moment(),\n  \t\tendTime: moment(Math.ceil((+moment().add(15, 'minutes')) / ROUNDING) * ROUNDING),\n  \t\tloggedIn: true,\n  \t\tjwtToken: null\n    };\n    this.addEvent = this.addEvent.bind(this);\n    this.setStart = this.setStart.bind(this)\n    this.setEnd = this.setEnd.bind(this)\n  }\n\n  componentDidMount() {\n\t\tthis.setUserState();\n\t}\n\n  setUserState() {\n\t  let userJson = JSON.parse(sessionStorage.getItem('googleUser'));\n\n\t  if(userJson !== null){\n\t\t \tthis.setState((state, props) => ({\n\t\t     loggedIn: true,\n\t\t     jwtToken:  userJson.tokenObj.token_type +\n\t\t     \t\" \" + userJson.tokenObj.access_token\n\t\t   }));\n\t  }else{\n\t\t \tthis.setState((state, props) => ({\n\t\t     loggedIn: false,\n\t\t     jwtToken: null\n\t\t   }));\n\t  }\n\t}\n\n  setStart = async val => {\n\t\tawait this.setState({\n\t\t\tstartTime:val\n\t\t});\n\t}\n\n\tsetEnd = async val => {\n\t\tawait this.setState({\n\t\t\tendTime:val\n\t\t});\n\t}\n\n\taddEvent() {\n   \tlet token = GOOGLE_API_KEY;\n   \tlet key  = this.state.jwtToken;\n\n   \tlet postData = {\n\t\t\t'summary': 'Quick Meeting',\n\t\t\t'description': 'Quick Meeting booked by SAM',\n\t\t\t'start': {\n\t\t\t\t'dateTime': moment(this.state.startTime).toISOString()\n\t\t\t},\n\t\t\t'end': {\n\t\t\t\t'dateTime': moment(this.state.endTime).toISOString()\n\t\t\t},\n\t\t\t'reminders': {\n\t\t\t\t'useDefault': false,\n\t\t\t}\n\t\t};\n\n\t\tlet headers = {\n      'Content-Type': 'application/json',\n    \t'Authorization': key\n\t\t};\n\n    axios.post(`https://content.googleapis.com/calendar/v3/calendars/${CALENDAR_ID}/events?alt=json&key=${token}`, postData, {headers: headers})\n      .then( function (response) {\n \t\t\t\tconsole.log(response);\n\t    })\n      .catch( (error) => {\n        console.log(error);\n      });\n  }\n\n  render(){\n\n  let addState = (\n      <div>\n\n\t      <div style={{display: 'inline-block'}}>\n\t        <Clock\n\t          value={moment(this.state.startTime).toDate()}\n\t        />\n\t      </div>\n\n\t      <h3>Book now for {moment(this.state.endTime).diff(this.state.startTime, 'minutes') + 1} minutes</h3>\n\n\t      <div className=\"startTimeContainer\">\n\t\t      <TimePicker\n\t\t\t      id=\"startTime\"\n\t\t\t      showSecond={false}\n\t\t\t      value={this.state.startTime}\n\t\t\t      onChange={this.setStart}\n\t\t\t      format={format}\n\t\t\t      use12Hours\n\t\t      />\n\t\t      <TimePicker\n\t\t\t      id=\"endTime\"\n\t\t\t      showSecond={false}\n\t\t\t      value={this.state.endTime}\n\t\t\t      onChange={this.setEnd}\n\t\t\t      format={format}\n\t\t\t      use12Hours\n\t        />\n\t      </div>\n\n\t   \t\t<button\n\t        className=\"primary-add\"\n          buttonText=\"Submit\"\n\t        onClick={this.addEvent.bind(this)}>Submit</button>\n\n          <button\n  \t        className=\"primary-add\"\n            buttonText=\"Cancel\"\n\n\t        onClick={() => document.getElementById(\"wk-message\").style.display=\"block\"} />\n      </div>);\n\n   \treturn(\n   \t\t<div className=\"appletContainer\" id=\"booker\">\n   \t\t\t{this.state.loggedIn && addState}\n   \t\t</div>\n   \t)\n\n  }\n}\n\n export default Book;\n"]},"metadata":{},"sourceType":"module"}